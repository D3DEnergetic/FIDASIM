<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   
   <meta name="description" content="">
    
    <meta name="author" content="Luke Stagner" >
    <link rel="icon" href="../../favicon.png">

    <title>Visualization &ndash; FIDASIM</title>

    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/pygments.css" rel="stylesheet">
    <link href="../../css/font-awesome.min.css" rel="stylesheet">
    <link href="../../css/local.css" rel="stylesheet">
    
    <link  href="../../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <script src="../../js/jquery-2.1.3.min.js"></script>
    <script src="../../js/svg-pan-zoom.min.js"></script>

  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../index.html">FIDASIM <small>3.0.0-dev</small></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
        
            <li><a href='../../page/index.html'>User Guide</a></li>
      
            <li class="dropdown hidden-xs visible-sm visible-md hidden-lg">
              <a href="#" class="dropdown-toggle"
              data-toggle="dropdown" role="button"
              aria-haspopup="true"
     aria-expanded="false">Contents <span class="caret"></span></a>
        <ul class="dropdown-menu">
          
              
            <li><a href="../../lists/files.html">Source Files</a></li>
        
        
        
            <li><a href="../../lists/modules.html">Modules</a></li>
        
            
                                
            <li><a href="../../lists/procedures.html">Procedures</a></li>
        
               
            <li><a href="../../lists/types.html">Derived Types</a></li>
        
        
            <li><a href="../../lists/programs.html">Programs</a></li>
               
        
        
            </ul>
        
            </li>


<li class="visible-xs hidden-sm visible-lg"><a href="../../lists/files.html">Source Files</a></li>



<li class="visible-xs hidden-sm visible-lg"><a href="../../lists/modules.html">Modules</a></li>



<li class="visible-xs hidden-sm visible-lg"><a href="../../lists/procedures.html">Procedures</a></li>

                             
<li class="visible-xs hidden-sm visible-lg"><a href="../../lists/types.html">Derived Types</a></li>


<li class="visible-xs hidden-sm visible-lg"><a href="../../lists/programs.html">Programs</a></li>



          </ul>
        
        <form action="../../search.html" class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
        </div>
<!--
        <button type="submit" class="btn btn-default">Submit</button>
-->
        </form>
        
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
    
  <div class="row">
    <h1>Visualization</h1>
    <div class="row">
    <div class="col-lg-12">
    <div class="well well-sm" style="min-height: 40px;">
      <ul class="list-inline" style="margin-bottom:0px; display:inline">
         
         
<!--
        
-->
      </ul>
        <ol class="breadcrumb in-well">
      
         <li><a href='../../page/index.html'>User Guide</a></li>
      
         <li><a href='../../page/01_getting_started/index.html'>Getting Started</a></li>
      
         <li class="active">Visualization</li>
      </ol>
    </div>
    </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-9 col-md-push-3" id='text'>
      <div class="toc">
<ul>
<li><a href="#visualizing-inputs">Visualizing Inputs</a></li>
<li><a href="#visualizing-outputs">Visualizing Outputs</a><ul>
<li><a href="#case-1-plotting-from-a-single-directory">Case 1: Plotting from a single directory</a></li>
<li><a href="#case-2-plotting-from-anywhere">Case 2: Plotting from anywhere</a></li>
<li><a href="#changing-subplot-parameters">Changing subplot parameters</a></li>
</ul>
</li>
</ul>
</div>
<hr>
<p>FIDASIM comes with visualization executables that make plotting inputs and outputs easy.
The code can be executed in the command line prompt or imported as a Python package.
This tutorial will focus on the former and provide many examples.
The scripts are configured to detect and use the default Python installation.
You can check the default path by running <code>which python</code> in the command line prompt.
If you do not have Python installed, please visit <a href="https://www.python.org/downloads/">here</a> for more details.</p>
<p>If you are running the visualization scripts from within a computing cluster (e.g. Iris or Portal), you will need X11 forwarding to display the plots on your screen. <a href="https://www.nomachine.com/download">NoMachine</a> is a useful application that will securely forward the plots to your display via the NoMachine virtual session.</p>
<p>The scripts depend upon the following packages</p>
<ul>
<li>numpy</li>
<li>h5py</li>
<li>matplotlib</li>
<li>os</li>
<li>mpl_toolkits</li>
<li>f90nml</li>
<li>re</li>
<li>argparse</li>
</ul>
<p>If you are plotting locally, use <code>conda</code> or <code>pip</code> to install dependencies.
If you are on a cluster, contact your Computer Systems Administrator to get the requirements downloaded.</p>
<h1 id="visualizing-inputs">Visualizing Inputs</h1>
<p>The inputs section assumes the following</p>
<ul>
<li>Example directory: <code>/u/garciaav/test</code></li>
<li>Run IDs: <code>330LT</code> and <code>LHD</code>.</li>
</ul>
<p>Plot everything (plasma, fields, distribution function and geometry):</p>
<div class="codehilite"><pre><span></span><code>plot_inputs /u/garciaav/test/ 330LT
</code></pre></div>

<p>Plot the plasma</p>
<div class="codehilite"><pre><span></span><code>plot_inputs /u/garciaav/test/ 330LT -p
</code></pre></div>

<p style="text-align: center"><img alt="" src="./media/visualize1.png" width="200"></p>
<p>Plot the fields</p>
<div class="codehilite"><pre><span></span><code>plot_inputs /u/garciaav/test/ 330LT -f
</code></pre></div>

<p style="text-align: center"><img alt="" src="./media/visualize2.png" width="200"></p>
<p>Plot the distribution function</p>
<div class="codehilite"><pre><span></span><code>plot_inputs /u/garciaav/test/ 330LT -d
</code></pre></div>

<p style="text-align: center"><img alt="" src="./media/visualize3.png" width="200"></p>
<p>Plot the diagnostic and beam geometry</p>
<div class="codehilite"><pre><span></span><code>plot_inputs /u/garciaav/test/ 330LT -g
</code></pre></div>

<p style="text-align: center"><img alt="" src="./media/visualize4.png" width="200"></p>
<p>Hide the legend</p>
<div class="codehilite"><pre><span></span><code>plot_inputs /u/garciaav/test/ 330LT -g -l
</code></pre></div>

<p style="text-align: center"><img alt="" src="./media/visualize5.png" width="200"></p>
<ul>
<li>Black: NBI centerline and the half-widths</li>
<li>Green: Beam grid boundaries</li>
<li>Autumn: Diagnostic line-of-sights</li>
<li>Purple: Plasma boundary approximated as a torus</li>
</ul>
<p>Plot lineouts at R = 153.4 cm</p>
<div class="codehilite"><pre><span></span><code>plot_inputs /u/garciaav/test/ 330LT -p -f -d -rz <span class="m">153</span>.4
</code></pre></div>

<p style="text-align: center"><img alt="" src="./media/visualize6-1.png" title="Te rzlineout" width="400"></p>
<p style="text-align: center"><img alt="" src="./media/visualize6-2.png" title="Br rzlineout" width="400"></p>
<p style="text-align: center"><img alt="" src="./media/visualize6-3.png" title="Fzr rzlineout" width="400"></p>
<p>Plot lineouts at Z = -10.8 cm:</p>
<div class="codehilite"><pre><span></span><code>plot_inputs /u/garciaav/test/ 330LT -p -f -d -zr -10.8
</code></pre></div>

<p style="text-align: center"><img alt="" src="./media/visualize7-1.png" title="Te zrlineout" width="400"></p>
<p style="text-align: center"><img alt="" src="./media/visualize7-2.png" title="Br zrlineout" width="400"></p>
<p style="text-align: center"><img alt="" src="./media/visualize7-3.png" title="Fzr zrlineout" width="400"></p>
<p>Plot Energy and Pitch lineouts for the distribution function</p>
<div class="codehilite"><pre><span></span><code>plot_inputs /u/garciaav/test/ 330LT -d -pz .2 -pr -.25 -ez <span class="m">80</span> -er <span class="m">40</span> -ep <span class="m">18</span>
</code></pre></div>

<p style="text-align: center"><img alt="" src="./media/visualize8-1.png" title="Fzp pzlineout" width="400"></p>
<p style="text-align: center"><img alt="" src="./media/visualize8-2.png" title="Fpr prlineout" width="400"></p>
<p style="text-align: center"><img alt="" src="./media/visualize8-3.png" title="Fze ezlineout" width="400"></p>
<p style="text-align: center"><img alt="" src="./media/visualize8-4.png" title="Fer erlineout" width="400"></p>
<p style="text-align: center"><img alt="" src="./media/visualize8-5.png" title="Fpe eplineout" width="400"></p>
<p>For 3D inputs, plot a slice by specifying the toroidal angle in radians</p>
<div class="codehilite"><pre><span></span><code>plot_inputs /u/garciaav/test/ LHD -p -f -d -ph <span class="m">0</span>.157
</code></pre></div>

<p style="text-align: center"><img alt="" src="./media/visualize9-1.png" title="Te" width="200"> <img alt="" src="./media/visualize9-2.png" title="Br" width="200"> <img alt="" src="./media/visualize9-3.png" title="Fzr" width="200"></p>
<p>Lastly, below are a few more useful optional arguments for plotting inputs</p>
<ul>
<li><code>-nl</code> number of contour levels</li>
<li><code>-si /u/garciaav/test/figs/</code> save important plots to a folder</li>
<li><code>-h</code> display help message</li>
</ul>
<p>You are all set to explore FIDASIM inputs!</p>
<h1 id="visualizing-outputs">Visualizing Outputs</h1>
<p>The outputs section assumes the following</p>
<ul>
<li>Example directories: <code>/u/garciaav/test/</code> and <code>/u/garciaav/different/</code></li>
<li>Run IDs <code>BAAE_1575</code>, <code>BAAE_1875</code>, <code>test_1</code>, <code>test_2</code>, and <code>diff_1575</code></li>
</ul>
<p>Plotting spectral and NPA data can be done in two ways.
If all of your data is located in one folder, then scroll down to Case 1.
However, if your data is located in more than one folder or you want to plot individually selected items from a single folder, then follow the conventions of Case 2.</p>
<h2 id="case-1-plotting-from-a-single-directory">Case 1: Plotting from a single directory</h2>
<p>The simplest command instructs the code to look inside a single directory.</p>
<ul>
<li><code>-d</code> path of single folder</li>
</ul>
<p>If the code finds <code>*_spectra.h5</code> files in the folder, you must indicate emission and channel information.</p>
<ul>
<li><code>-s</code> plot all emission,</li>
<li><code>-fi</code> FIDA</li>
<li><code>-pf</code> passive FIDA</li>
<li><code>-f</code> Full BES</li>
<li><code>-hf</code> Half BES</li>
<li><code>-t</code> Third BES</li>
<li><code>-b</code> Bremsstrahlung</li>
<li><code>-c</code> Cold D-alpha</li>
<li><code>-hl</code> Halo</li>
<li><code>-dc</code> DCX</li>
<li><code>-as</code> all spectral channels</li>
<li><code>-rs</code> range of spectral channels</li>
<li><code>-ls</code> list of spectral channels</li>
</ul>
<p>Note: <code>-s</code> cannot be used with any other emission type argument.</p>
<p>Similarly, if the code finds any <code>*_npa.h5</code> files in the folder, you must indicate flux and channel information.
The syntax of the NPA arguments is similar to the spectral arguments.</p>
<ul>
<li><code>-n</code> plot all NPA flux types</li>
<li><code>-np</code> NPA</li>
<li><code>-pn</code> passive NPA</li>
<li><code>-an</code> all NPA channels</li>
<li><code>-rn</code> range of NPA channels</li>
<li><code>-ln</code> list of NPA channels</li>
</ul>
<p>If you have many output files in the folder, below are two filtering techniques</p>
<ul>
<li><code>-os</code> Force only spectral plots</li>
<li><code>-on</code> Force only NPA plots</li>
<li><code>-r</code> Force a specific runid</li>
</ul>
<p>Below are some examples for Case 1 capabilities</p>
<p><code>plot_outputs -d /u/garciaav/test/ -s -as -n -an</code>
Plots all spectral data, all spectral channels, all NPA data and all NPA channels.</p>
<p style="text-align: center"><img alt="" src="./media/visualize10-1.png" title="Spectra 1-9" width="200"> <img alt="" src="./media/visualize10-2.png" title="Spectra 10-18" width="200"> <img alt="" src="./media/visualize10-3.png" title="Spectra 19-24" width="200"></p>
<p style="text-align: center"><img alt="" src="./media/visualize10-4.png" title="NPA 1-3" width="200"></p>
<p>Note: The first Python index is 0, but the code will add 1 to all subplots in order to avoid displaying “Channel 0.”</p>
<p><code>plot_outputs -d /u/garciaav/test/ -s -rs 11 19 -n -rn 1 2</code>
Plots all spectral data, range of spectral channels (11-19), all NPA data and range of NPA channels (1-2).</p>
<p style="text-align: center"><img alt="" src="./media/visualize11-1.png" title="Spectra 11-19" width="200"></p>
<p style="text-align: center"><img alt="" src="./media/visualize11-2.png" title="NPA 1-2" width="200"></p>
<p><code>plot_outputs -d /u/garciaav/test/ -fi -ls 1 14 22 -np -ln 2</code>
Plots active FIDA data, list of spectral channels (1, 14 &amp; 19), active NPA data and list of NPA channels (2).</p>
<p style="text-align: center"><img alt="" src="./media/visualize12-1.png" title="Spectra 1, 14 &amp; 22" width="200"></p>
<p style="text-align: center"><img alt="" src="./media/visualize12-2.png" title="NPA 2" width="200"></p>
<p><code>plot_outputs -d /u/garciaav/test/ -r BAAE_1875 -fi -ls 12 14 22 -os</code>
Plots run ID BAAE_1875, active FIDA data, list of spectral channels (12, 14 &amp; 22), and ignores NPA files.</p>
<p style="text-align: center"><img alt="" src="./media/visualize13.png" title="FIDA runid 12, 14 &amp; 22" width="200"></p>
<h2 id="case-2-plotting-from-anywhere">Case 2: Plotting from anywhere</h2>
<p>In this case, the single folder constraint is removed and the user must provide full file paths</p>
<ul>
<li><code>-p</code> paths of selected files</li>
</ul>
<p>Below are some examples for Case 2 capabilities</p>
<p><code>plot_outputs -p /u/garciaav/different/diff_1575_spectra.h5 -s -rs 10 18 -n -rn 2 3</code>
Plots all spectral data, range of spectral channels (10-18), all NPA data and range of NPA channels (2-3).</p>
<p style="text-align: center"><img alt="" src="./media/visualize14-1.png" title="Spectra 10-18" width="200"></p>
<p style="text-align: center"><img alt="" src="./media/visualize14-2.png" title="NPA 2-3" width="200"></p>
<p><code>plot_outputs -p /u/garciaav/different/diff_1575_spectra.h5 -fi -ls 1</code>
Plots active FIDA data and list of spectral channels (1).</p>
<p style="text-align: center"><img alt="" src="./media/visualize15.png" title="FIDA 1" width="200"></p>
<h2 id="changing-subplot-parameters">Changing subplot parameters</h2>
<p>Below are the arguments to customize the subplots for spectral plots</p>
<ul>
<li><code>-sx</code> change spectral x limits</li>
<li><code>-sy</code> change spectral y limits</li>
<li><code>-sl</code> spectral log plot</li>
</ul>
<p>and similarly for NPA plots
* <code>-nx</code> change NPA x limits
* <code>-ny</code> change NPA y limits
* <code>-nl</code> NPA log plot</p>
<p>Below are examples of subplot modifications</p>
<p><code>plot_outputs -p /u/garciaav/different/diff_1575_spectra.h5 -fi -ls 1 -sx 649 663</code>
Plots active FIDA data, list of spectral channels (1) and sets wavelength limits (649-663).</p>
<p style="text-align: center"><img alt="" src="./media/visualize16.png" title="FIDA xlim" width="200"></p>
<p><code>plot_outputs -p /u/garciaav/different/diff_1575_spectra.h5 -fi -ls 1 -sx 649 663 -sy 3e11 3e16 -sl</code>
Plots active FIDA data, list of spectral channels (1), sets wavelength limits (649-663), sets radiance limits (<script type="math/tex">3\times 10^11</script>,<script type="math/tex">3\times 10^16</script> ) and turns on the log scale.</p>
<p style="text-align: center"><img alt="" src="./media/visualize17.png" title="FIDA xlim ylim log" width="200"></p>
<p><code>plot_outputs -p /u/garciaav/test/test_1_npa.h5 -n -ln 1 -ny 4e8 2e11 -nl</code>
Plots NPA data, list of NPA channels (1), sets flux limits (<script type="math/tex">4\times 10^8</script>,<script type="math/tex">2\times 10^11</script> ) and turns on the log scale.</p>
<p style="text-align: center"><img alt="" src="./media/visualize18.png" title="NPA ylim log" width="200"></p>
<p>Lastly, below are a few more useful optional arguments for plotting outputs</p>
<ul>
<li><code>-p</code> can be used with more than one argument (e.g. <code>-p filepath1 filepath2 ...</code>)</li>
<li><code>-ss -sn /u/garciaav/test/figs/</code> save spectral and NPA plots to a folder</li>
<li><code>-h</code> display help message</li>
</ul>
<p>Congratulations, you made it to the end of the tutorial!</p>
<p>If you have any questions, find a bug or have a suggestion, please let us know on <a href="https://github.com/D3DEnergetic/FIDASIM/issues">GitHub</a></p>
    </div>
    
    <div class="col-md-3 col-md-pull-9">
      <hr class="visible-xs visible-sm">
        <div class="well toc">
          <ul class="nav nav-stacked nav-pills">
            <li role="presentation" class="title"><a href='../../page/index.html'>User Guide</a></li>
          </ul>
          <hr>
          <ul class="nav nav-stacked nav-pills">
            
            <li role="presentation">
            <a href='../../page/01_getting_started/index.html'>Getting Started</a>
            
            <ul class="nav nav-stacked nav-pills">
              
            <li role="presentation">
            <a href='../../page/01_getting_started/01_install.html'>Installation</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/01_getting_started/02_preprocess.html'>Preprocessing Inputs</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/01_getting_started/03_running.html'>Running FIDASIM</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/01_getting_started/04_reading.html'>Reading Outputs</a>
            
            </li>
            
            <li role="presentation" class="disabled">
            <a href='../../page/01_getting_started/05_visual.html'>Visualization</a>
            
            </li>
            
            </ul>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/02_physics/index.html'>Physics</a>
            
            <ul class="nav nav-stacked nav-pills">
              
            <li role="presentation">
            <a href='../../page/02_physics/01_plasma.html'>Plasma Parameters, Fields, and Distributions</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/02_physics/02_atomic_tables.html'>Atomic Tables</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/02_physics/03_colrad.html'>Collisional Radiative Model</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/02_physics/04_neutrals.html'>Neutral Beam and Halo</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/02_physics/05_spectra.html'>Spectra</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/02_physics/06_npa.html'>Neutral Particle Analyzer</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/02_physics/07_weights.html'>Weight Functions</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/02_physics/08_passive.html'>Cold Neutrals and Passive Signals</a>
            
            </li>
            
            </ul>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/03_technical/index.html'>Technical Details</a>
            
            <ul class="nav nav-stacked nav-pills">
              
            <li role="presentation">
            <a href='../../page/03_technical/01_prefida_inputs.html'>PREFIDA Inputs</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/03_technical/02_trouble.html'>Troubleshooting</a>
            
            </li>
            
            <li role="presentation">
            <a href='../../page/03_technical/03_advanced.html'>Advanced Settings</a>
            
            </li>
            
            </ul>
            
            </li>
            
          </ul>
        </div>
    </div>
    
  </div>

    <hr>    
    </div> <!-- /container -->
    <footer>
      <div class="container">
      <div class="row">
        <div class="col-xs-6 col-md-6"><p>FIDASIM was developed by Luke Stagner<br>&copy; 2021 
                                          </p>
        </div>
        <div class="col-xs-6 col-md-6">
          <p class="text-right">
            Documentation generated by 
            <a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a>
            
            
          </p>
        </div>
      </div>
      <br>
      </div> <!-- /container -->    
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
<!--
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
-->
    <script src="../../js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../js/ie10-viewport-bug-workaround.js"></script>

    <!-- MathJax JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },
        jax: ['input/TeX','input/MathML','output/HTML-CSS'],
        extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']
      });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    
    <script src="../../tipuesearch/tipuesearch_content.js"></script>
    <script src="../../tipuesearch/tipuesearch_set.js"></script>
    <script src="../../tipuesearch/tipuesearch.js"></script>
    
    
  </body>
</html>